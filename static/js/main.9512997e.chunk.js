(this["webpackJsonpmovie-poll"]=this["webpackJsonpmovie-poll"]||[]).push([[0],{30:function(n,e,t){n.exports=t(62)},35:function(n,e,t){},62:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),c=t(22),o=t.n(c),u=(t(35),t(28)),i=t(9),l=t(29),s=t(15),f=t(16),p=t(4),d=t.n(p),m=t(5),x=t(8),v=t(1),b=t(2),g={margin:{x1:8,x2:16,x3:24},color:{WHITE:"#FFFFFF",BLACK:"#000000",GREY:"grey",BLUE:"#00BFFF"}},h="https://hidden-reef-75246.herokuapp.com/",j=function(){var n=Object(m.a)(d.a.mark((function n(){var e,t;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat(h,"poll"));case 2:return e=n.sent,n.next=5,e.json();case 5:if(!(t=n.sent)){n.next=10;break}return n.abrupt("return",t);case 10:return n.abrupt("return",null);case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),w=function(n){return Object.keys(n).map((function(e){return"".concat(e,"=").concat(n[e])})).join("&")},E=function(){var n=Object(m.a)(d.a.mark((function n(e){var t,r,a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={answerId:e},n.next=3,fetch("".concat(h,"poll/vote"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:w(t)});case 3:return r=n.sent,n.next=6,r.json();case 6:return a=n.sent,n.abrupt("return",a);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),O=function(){var n=Object(m.a)(d.a.mark((function n(e,t){var r,a,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={id:e,title:t},n.next=3,fetch("".concat(h,"poll/answer/append"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:w(r)});case 3:return a=n.sent,n.next=6,a.json();case 6:return c=n.sent,n.abrupt("return",c);case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),y=t(23),k=t.n(y);function I(){var n=Object(v.a)(["\n  display: flex;\n  flex: 1;\n  justify-content: center;\n  align-items: center;\n  background-color: black;\n"]);return I=function(){return n},n}var F=b.a.div(I()),T=function(){return a.a.createElement(F,null,a.a.createElement(k.a,{type:"Bars",color:g.color.BLUE,height:80,width:80}))},B=t(64),S=t(65),W=function(n){return{id:n.id,title:"".concat(n.title," (").concat(Object(B.a)(Object(S.a)(n.release_date)),")")}},H="f272a5f43ce4cc5810634ac04d30aa7d",C=function(){var n=Object(m.a)(d.a.mark((function n(e){var t,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat("https://api.themoviedb.org/3/").concat("search/movie","?api_key=").concat(H,"&language=fr-FR&page=1&include_adult=false&query=").concat(e));case 2:return t=n.sent,n.next=5,t.json();case 5:if(!(r=n.sent).results.length){n.next=10;break}return n.abrupt("return",r.results.map(W).slice(0,10));case 10:return n.abrupt("return",null);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),A=function(){var n=Object(m.a)(d.a.mark((function n(e){var t,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat("https://api.themoviedb.org/3/").concat("movie/").concat(e,"?api_key=").concat(H,"&language=fr-FR"));case 2:return t=n.sent,n.next=5,t.json();case 5:return r=n.sent,n.abrupt("return",r);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();function L(){var n=Object(v.a)(["\n  color: ",";\n  text-align: justify;\n"]);return L=function(){return n},n}function R(){var n=Object(v.a)(["\n  color: ",";\n"]);return R=function(){return n},n}function U(){var n=Object(v.a)(["\n  color: ",";\n"]);return U=function(){return n},n}var _=b.a.h3(U(),g.color.WHITE),G=b.a.p(R(),g.color.WHITE),Y=b.a.p(L(),g.color.WHITE),J=a.a.memo((function(n){var e=n.movieId,t=Object(r.useState)(null),c=Object(x.a)(t,2),o=c[0],u=c[1],i=Object(r.useCallback)(function(){var n=Object(m.a)(d.a.mark((function n(e){var t;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,A(e);case 2:t=n.sent,u(t);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){i(e)}),[i,e]),o?a.a.createElement(a.a.Fragment,null,a.a.createElement(_,null,o.title),a.a.createElement(G,null,o.genres.map((function(n){return n.name})).join(", ")),a.a.createElement(Y,null,o.overview)):null}));function K(){var n=Object(v.a)(["\n  user-select: none;\n"]);return K=function(){return n},n}function M(){var n=Object(v.a)(["\n  display: flex;\n  background-color: ",";\n  border-bottom-width: 1;\n  border-bottom-width-color: black;\n  padding: ","px ","px ","px ","px;\n"]);return M=function(){return n},n}function P(){var n=Object(v.a)(["\n  overflow: auto;\n  height: ",";\n"]);return P=function(){return n},n}function q(){var n=Object(v.a)(["\n  display: flex;\n  flex-grow: 1;\n  background-color: ",";\n  height: 30px;\n  max-width: 370px;\n"]);return q=function(){return n},n}function $(){var n=Object(v.a)(["\n  display: flex;\n  flex-grow: 1;\n  flex-direction: column;\n  background-color: ",";\n  max-width: 370px;\n  margin-left: ","px;\n  margin-top: ","px;\n  border-radius: 4px;\n"]);return $=function(){return n},n}function z(){var n=Object(v.a)(["\n  margin-left: ","px;\n  margin-right: ","px;\n  color: ",";\n  user-select: none;\n"]);return z=function(){return n},n}function D(){var n=Object(v.a)(["\n  display: flex;\n  margin-left: ","px;\n  margin-top: ","px;\n  justify-content: center;\n  align-items: center;\n  background-color: ",";\n  border-radius: 10px;\n  height: 35px;\n"]);return D=function(){return n},n}function N(){var n=Object(v.a)(["\n  display: flex;\n  color: ",";\n  margin: ","px 0px 0px 0px;\n  user-select: none;\n"]);return N=function(){return n},n}function Q(){var n=Object(v.a)(["\n  display: flex;\n  margin-top: ","px;\n  justify-content: center;\n"]);return Q=function(){return n},n}var V=b.a.div(Q(),g.margin.x2),X=b.a.h2(N(),g.color.WHITE,g.margin.x1),Z=b.a.div(D(),g.margin.x2,g.margin.x1,g.color.BLUE),nn=b.a.p(z(),g.margin.x1,g.margin.x1,g.color.WHITE),en=b.a.div($(),g.color.WHITE,g.margin.x2,g.margin.x1),tn=b.a.input(q(),g.color.WHITE),rn=b.a.div(P(),(function(n){return n.isEmpty?"0px":"300px"})),an=b.a.div(M(),g.color.WHITE,g.margin.x1,g.margin.x1,g.margin.x1,g.margin.x1),cn=b.a.p(K()),on=function(n){var e=n.addAnwser,t=Object(r.useState)([]),c=Object(x.a)(t,2),o=c[0],u=c[1],i=function(){var n=Object(m.a)(d.a.mark((function n(){var e,t;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e=document.getElementById("movieSearchInput")).value){n.next=6;break}return n.next=4,C(e.value);case 4:t=n.sent,u(t);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return a.a.createElement(V,null,a.a.createElement(X,null,"Ajouter un film : "),a.a.createElement(en,null,a.a.createElement(tn,{id:"movieSearchInput",type:"text",placeholder:"Rechercher un film"}),a.a.createElement(rn,{isEmpty:!o.length},o.map((function(n){return a.a.createElement(an,{key:n.id,onClick:function(){return t=n.id,r=n.title,console.log("Selected movie: ",t,r),u([]),void e(t,r);var t,r}},a.a.createElement(cn,null,n.title))})))),a.a.createElement(Z,{onClick:i},a.a.createElement(nn,null,"Rechercher")))};function un(){var n=Object(v.a)(["\n  display: flex;\n  flex: 1\n"]);return un=function(){return n},n}function ln(){var n=Object(v.a)(["\n  user-select: none;\n"]);return ln=function(){return n},n}function sn(){var n=Object(v.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 40px;\n  width: 40px;\n  border-radius: 20px;\n  background-color: ",";\n  margin: ","px;\n"]);return sn=function(){return n},n}function fn(){var n=Object(v.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return fn=function(){return n},n}function pn(){var n=Object(v.a)(["\n  margin: ","px ","px ","px ","px;\n  user-select: none;\n"]);return pn=function(){return n},n}function dn(){var n=Object(v.a)(["\n  display: flex;\n  flex-grow: 1;\n  padding: ","px;\n  margin-top: ","px;\n  margin-bottom: ","px;\n  background-color: ",";\n  border-radius: 8px;\n  max-width: 500px;\n"]);return dn=function(){return n},n}function mn(){var n=Object(v.a)(["\n  color: ",";\n  text-align: center;\n"]);return mn=function(){return n},n}function xn(){var n=Object(v.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  padding: ","px;\n  background-color: ",";\n"]);return xn=function(){return n},n}var vn=b.a.div(xn(),g.margin.x1,g.color.BLACK),bn=b.a.h1(mn(),g.color.WHITE),gn=b.a.div(dn(),g.margin.x1,g.margin.x1,g.margin.x1,(function(n){switch(n.isAnswer){case!0:return g.color.BLUE;case!1:return g.color.GREY;case null:default:return g.color.WHITE}})),hn=b.a.p(pn(),g.margin.x2,g.margin.x1,g.margin.x2,g.margin.x1),jn=b.a.div(fn()),wn=b.a.div(sn(),(function(n){return n.selected?g.color.BLUE:g.color.GREY}),g.margin.x1),En=b.a.p(ln()),On=b.a.div(un()),yn=function(){var n=Object(r.useState)(null),e=Object(x.a)(n,2),t=e[0],c=e[1],o=Object(r.useState)(null),u=Object(x.a)(o,2),i=u[0],p=u[1],v=Object(r.useState)(null),b=Object(x.a)(v,2),g=b[0],h=b[1],w=Object(r.useState)({}),y=Object(x.a)(w,2),k=y[0],I=y[1],F=!!i,B=function(){var n=Object(m.a)(d.a.mark((function n(){var e;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j();case 2:e=n.sent,c(e);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),S=function(){var n=Object(m.a)(d.a.mark((function n(e){var t;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(F){n.next=6;break}return p(e),n.next=4,E(e);case 4:t=n.sent,h(t);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();Object(r.useEffect)((function(){B()}),[]);return t?a.a.createElement(vn,null,a.a.createElement(bn,null,t.title),t.answers.map((function(n){return a.a.createElement(jn,{key:"answer-".concat(n.id)},a.a.createElement(gn,{onClick:function(){return S(n.id)},isAnswer:i?i===n.id:null},a.a.createElement(hn,null,n.title),a.a.createElement(On,null),g?a.a.createElement(hn,null,function(n){var e=g[n],t=Object.values(g).reduce((function(n,e){return n+e}),0);return"".concat(Math.round(e/t*100)," %")}(n.id)):null),a.a.createElement(wn,{onClick:function(){return function(n){var e=Object.keys(k).reduce((function(n,e){return Object(f.a)({},n,{curr:!1})}),{});I(Object(f.a)({},e,Object(s.a)({},n,!k[n])))}(n.id)},selected:k[n.id]},a.a.createElement(En,null,"i")))})),a.a.createElement(on,{addAnwser:function(n,e){var r=n.toString();t.answers.find((function(n){return n.id===r}))||(O(n,e),c(Object(f.a)({},t,{answers:[].concat(Object(l.a)(t.answers),[{id:r,title:e}])})))}}),t.answers.map((function(n){return a.a.createElement("div",{key:"info-".concat(n.id)},k[n.id]&&a.a.createElement(J,{movieId:n.id}))}))):a.a.createElement(T,{type:"Bars",color:"#00BFFF",height:80,width:80})},kn=function(){return a.a.createElement(u.a,null,a.a.createElement(i.c,null,a.a.createElement(i.a,{exact:!0,path:"/movie-poll",component:yn})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(kn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.9512997e.chunk.js.map