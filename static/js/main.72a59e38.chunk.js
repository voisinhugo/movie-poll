(this["webpackJsonpmovie-poll"]=this["webpackJsonpmovie-poll"]||[]).push([[0],{26:function(n,e,t){n.exports=t(58)},31:function(n,e,t){},58:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),c=t(18),o=t.n(c),u=(t(31),t(25)),i=t(8),l=t(12),s=t(19),f=t(2),p=t.n(f),m=t(7),d=t(9),v=t(3),x=t(4),b={margin:{x1:8,x2:16},color:{WHITE:"#FFFFFF",BLACK:"#000000",GREY:"grey",BLUE:"#00BFFF"}},h="https://hidden-reef-75246.herokuapp.com/",j=function(){var n=Object(m.a)(p.a.mark((function n(){var e,t;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat(h,"poll"));case 2:return e=n.sent,n.next=5,e.json();case 5:if(!(t=n.sent)){n.next=10;break}return n.abrupt("return",t);case 10:return n.abrupt("return",null);case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),g=function(n){return Object.keys(n).map((function(e){return"".concat(e,"=").concat(n[e])})).join("&")},E=function(){var n=Object(m.a)(p.a.mark((function n(e){var t,r,a;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={answerId:e},n.next=3,fetch("".concat(h,"poll/vote"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:g(t)});case 3:return r=n.sent,n.next=6,r.json();case 6:return a=n.sent,n.abrupt("return",a);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),w=t(20),O=t.n(w);function y(){var n=Object(v.a)(["\n  display: flex;\n  flex: 1;\n  justify-content: center;\n  align-items: center;\n  background-color: black;\n"]);return y=function(){return n},n}var k=x.a.div(y()),F=function(){return a.a.createElement(k,null,a.a.createElement(O.a,{type:"Bars",color:b.color.BLUE,height:80,width:80}))},B="f272a5f43ce4cc5810634ac04d30aa7d",I=function(){var n=Object(m.a)(p.a.mark((function n(e){var t,r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat("https://api.themoviedb.org/3/").concat("movie/").concat(e,"?api_key=").concat(B,"&language=fr-FR"));case 2:return t=n.sent,n.next=5,t.json();case 5:return r=n.sent,n.abrupt("return",r);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();function T(){var n=Object(v.a)(["\n  color: ",";\n  text-align: justify;\n"]);return T=function(){return n},n}function W(){var n=Object(v.a)(["\n  color: ",";\n"]);return W=function(){return n},n}function S(){var n=Object(v.a)(["\n  color: ",";\n"]);return S=function(){return n},n}var C=x.a.h3(S(),b.color.WHITE),H=x.a.p(W(),b.color.WHITE),L=x.a.p(T(),b.color.WHITE),A=a.a.memo((function(n){var e=n.movieId,t=Object(r.useState)(null),c=Object(d.a)(t,2),o=c[0],u=c[1],i=Object(r.useCallback)(function(){var n=Object(m.a)(p.a.mark((function n(e){var t;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I(e);case 2:t=n.sent,u(t);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){i(e)}),[i,e]),o?a.a.createElement(a.a.Fragment,null,a.a.createElement(C,null,o.title),a.a.createElement(H,null,o.genres.map((function(n){return n.name})).join(", ")),a.a.createElement(L,null,o.overview)):null}));function R(){var n=Object(v.a)(["\n  display: flex;\n  flex: 1\n"]);return R=function(){return n},n}function U(){var n=Object(v.a)(["\n  user-select: none;\n"]);return U=function(){return n},n}function G(){var n=Object(v.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 40px;\n  width: 40px;\n  border-radius: 20px;\n  background-color: ",";\n  margin: ","px;\n"]);return G=function(){return n},n}function Y(){var n=Object(v.a)(["\n  display: flex;\n  align-items: center;\n"]);return Y=function(){return n},n}function J(){var n=Object(v.a)(["\n  margin: ","px ","px ","px ","px;\n  user-select: none;\n"]);return J=function(){return n},n}function K(){var n=Object(v.a)(["\n  display: flex;\n  flex-grow: 1;\n  padding: ","px;\n  margin-top: ","px;\n  margin-bottom: ","px;\n  background-color: ",";\n  border-radius: 8px;\n  max-width: 500px;\n"]);return K=function(){return n},n}function M(){var n=Object(v.a)(["\n  color: ",";\n"]);return M=function(){return n},n}function P(){var n=Object(v.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  padding: ","px;\n  background-color: ",";\n"]);return P=function(){return n},n}var $=x.a.div(P(),b.margin.x1,b.color.BLACK),_=x.a.h1(M(),b.color.WHITE),q=x.a.div(K(),b.margin.x1,b.margin.x1,b.margin.x1,(function(n){switch(n.isAnswer){case!0:return b.color.BLUE;case!1:return b.color.GREY;case null:default:return b.color.WHITE}})),z=x.a.p(J(),b.margin.x2,b.margin.x1,b.margin.x2,b.margin.x1),D=x.a.div(Y()),N=x.a.div(G(),(function(n){return n.selected?b.color.BLUE:b.color.GREY}),b.margin.x1),Q=x.a.p(U()),V=x.a.div(R()),X=function(){var n=Object(r.useState)(null),e=Object(d.a)(n,2),t=e[0],c=e[1],o=Object(r.useState)(null),u=Object(d.a)(o,2),i=u[0],f=u[1],v=Object(r.useState)(null),x=Object(d.a)(v,2),b=x[0],h=x[1],g=Object(r.useState)({}),w=Object(d.a)(g,2),O=w[0],y=w[1],k=!!i,B=function(){var n=Object(m.a)(p.a.mark((function n(){var e;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j();case 2:e=n.sent,c(e);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),I=function(){var n=Object(m.a)(p.a.mark((function n(e){var t;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return!k&&f(e),n.next=3,E(e);case 3:t=n.sent,h(t);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();Object(r.useEffect)((function(){B()}),[]);return t?a.a.createElement($,null,a.a.createElement(_,null,t.title),t.answers.map((function(n){return a.a.createElement(D,{key:"answer-".concat(n.id)},a.a.createElement(q,{onClick:function(){return I(n.id)},isAnswer:i?i===n.id:null},a.a.createElement(z,null,n.title),a.a.createElement(V,null),b?a.a.createElement(z,null,function(n){var e=b[n],t=Object.values(b).reduce((function(n,e){return n+e}),0);return"".concat(Math.round(e/t*100)," %")}(n.id)):null),a.a.createElement(N,{onClick:function(){return e=n.id,void y(Object(s.a)({},O,Object(l.a)({},e,!O[e])));var e},selected:O[n.id]},a.a.createElement(Q,null,"i")))})),t.answers.map((function(n){return a.a.createElement("div",{key:"info-".concat(n.id)},O[n.id]&&a.a.createElement(A,{movieId:n.id}))}))):a.a.createElement(F,{type:"Bars",color:"#00BFFF",height:80,width:80})},Z=function(){return a.a.createElement(u.a,null,a.a.createElement(i.c,null,a.a.createElement(i.a,{exact:!0,path:"/movie-poll",component:X})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.72a59e38.chunk.js.map